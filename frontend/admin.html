<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Töötaja Liides</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map {
            height: 400px;
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>Sündmuste halduse liides</h1>

    <h2>Lisa sündmus</h2>
    <form id="event-form">
        <input type="text" id="event-title" placeholder="Sündmuse pealkiri" required>
        <input type="text" id="event-description" placeholder="Kirjeldus" required>
        <input type="text" id="event-location" placeholder="Asukoht" required>
        <input type="date" id="event-date" required>  <!-- Kuupäeva formaat -->
        <input type="time" id="event-start-time" required> <!-- 24-tunnine kellaaeg -->
        <input type="time" id="event-end-time" required> <!-- 24-tunnine kellaaeg -->
        <button type="submit">Lisa Sündmus</button>
    </form>

    <script>
        const eventForm = document.getElementById('event-form');

        // Sündmuse lisamine
        eventForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const title = document.getElementById('event-title').value;
            const description = document.getElementById('event-description').value;
            const location = document.getElementById('event-location').value;
            const eventDate = document.getElementById('event-date').value;
            const startTime = document.getElementById('event-start-time').value;
            const endTime = document.getElementById('event-end-time').value;

            // Kuupäeva ja kellaaja vormindamine
            const formattedDate = eventDate.split('.').reverse().join('-');  // Muudab kuupäeva formaati YYYY-MM-DD
            const fullStartDateTime = `${formattedDate} ${startTime}`; // 24-tunnine kellaaeg
            const fullEndDateTime = `${formattedDate} ${endTime}`; // 24-tunnine kellaaeg

            const response = await fetch('/events', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ title, description, location, startTime: fullStartDateTime, endTime: fullEndDateTime })
            });

            if (response.ok) {
                alert('Sündmus lisatud!');
            } else {
                alert('Sündmuse lisamine ebaõnnestus.');
            }
        });
    </script>
</body>
</html>